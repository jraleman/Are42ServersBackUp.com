<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="utf-8">
  <title>Are 42 Servers Back Up?</title>
  <meta name="description" content="Find out here!">
</head>
<body>
  <h1 id="answer"></h1>
  <script>
    const isOnline = function () {
      document.getElementById('answer').innerText = 'Yes! :D';  
    }
    const isOffline = function () {
      document.getElementById('answer').innerText = 'Nop... :(';
    }
    function offsetDate(offsetMinutes, d) {
      d = d ? new Date(d) : new Date();
      if (offsetMinutes) 
        d.setUTCMinutes(d.getUTCMinutes() + offsetMinutes);
      return d;
    }
    function isServerOnline(ifOnline, ifOffline) {
      // Not for now...
      /*
      var time = offsetDate(-8 * 60);
      console.log(time.getUTCHours() + ':'+ time.getUTCMinutes());
      if (time.getUTCHours() > 20) {
        if ((time.getUTCHours() == 21 && time.getUTCMinutes() >= 25) || time.getUTCHours() > 21) {
          ifOffline && ifOffline.constructor == Function && ifOffline();
          return ;
        }
      }
      */
      // Load an image, expecting to come back quickly...
      // If it fails, server is down... if not, server is fine
      // Logica Cavernicola tm.
      var img = document.body.appendChild(document.createElement('img'));
      img.onload = function() {
          ifOnline && ifOnline.constructor == Function && ifOnline();
      };
      img.onerror = function() {
          ifOffline && ifOffline.constructor == Function && ifOffline();
      };
      img.style.display = 'none';
      img.src = 'https://www.42.us.org/wp-content/themes/42/images/42_logo_black.svg';        
    }
    isServerOnline(isOnline, isOffline);
  </script>
</body>
</html>
